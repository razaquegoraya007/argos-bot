'use strict';(()=>{function p(a,b){return c=>$(`<div>&nbsp; Mode: ${_Mo(b,c.params[a],a,"number")} <h h=${"mode"}></h></div>`)}function x(a,b,c){c=_Qi(c,"tse").add({other:"Other tab... <edit></edit>"});a=$(_1u(c,a,_0p(b)?"other":b));_0p(b)&&a.prop("value",b);return a}function t(a){$(a).on("change","[name=baseMonitor]",function(){$(this).attr("value",this.value)}).on("click","preview",function(){_L(a)}).on("close",function(){_6h(this)})}let e=document.currentScript.parentElement.paramsGuiGen={};e.activateTabs=
function({params:a}){return $(`<div><label>${_Gy("peek",a.peek)}Keep MRU order</label> <h h=pk></h></div>`)};e.close=function({params:a}){return $(`<div>Switch to: ${_1u({"":"(default behavior)"}.add(_Qi(["prevUsedTab","leftTab","rightTab"],"tse")),"switchTo",a.switchTo||"")} <h h=swto></h></div>`)};e.closeTabs=function({params:a}){let b={"":["(default behavior)","dft"]}.add(_Qi("prevUsedTab openerTab leftTab rightTab firstTab lastTab".split(" "),"tse"));b=JSON.parse(JSON.stringify(b).replace(/\/tse\//g,
""));return $(`\n <div><l>Switch to:</l> ${_1u(b,"switchTo",a.switchTo||"")} <h h=swto></h></div>\n <div><l>Keep open:</l> ${_Mo({"":"None",lastWin:"Last window",anyWin:"Any window"},a.keepWin,"keepWin")} <h h=kpW></h></div>\n `)};e.openNTP=function({params:a}){return $(`<div>&nbsp;${_Mo({ntp:"Default page",blank:"Blank page"},a.page,"page")} <h h=pg></h></div>`)};e.muteTabs=p("mode",[[_Ns,"Mute"],[_Hj,"Unmute"],[_Fa,"Toggle"]]);e.pinTabs=p("mode",[[_Ns,"Pin"],[_Hj,"Unpin"],[_Fa,"Toggle"]]);e.reloadTabs=
p("force",{0:"Normal reload",1:"Hard reload"});e.highlightTabs=function({params:a}){return $(`\n <div>&nbsp; Mode: ${_Mo([[_Ns,"Select"],[_Hj,"Unselect"],[_Fa,"Toggle"]],a.mode,"mode","number")} <h h=mode></h></div>\n <div><label>${_Gy("inclActTab",a.inclActTab)}Include active tab</label> <h h=actT></h></div>\n `)};e.zoomTabs=function({params:a},b){a=_3r(`\n <div>\n <l>Type:</l> ${_Mo([[1,"Zoom in (proportional)"],[2,"Zoom in (fixed)"],[-1,"Zoom out (proportional)"],[-2,"Zoom out (fixed)"],["custom",
"Custom zoom"],[0,"Reset to default"]],a.type,"type")}\n <h h=tpe></h>\n </div>\n <div rel><l>Amount:</l> ${_Mo({1:"5 %",2:"10 %",3:"15 %",4:"20 %",5:"27 %",6:"35 %"},a.steps,"steps","number")} <h h=rel></h></div>\n <div fix><l>Amount:</l> <input type=number name=amount value="${a.amount||5}" min=1 max=100>points <h h=fix></h></div>\n <div cust><l>Amount:</l> <input type=number name=amount value="${a.amount||100}" min=10 max=800 step=5><unit>%</unit> <h h=cst></h></div>\n <div><l>Scope:</l> ${_Mo({0:"Domain",
1:"Tab"},a.perTab,"perTab","bool")} <h h=scp></h></div>\n `);$("[name=type]",a).on("change",function(c,d=b){$("div[rel]",d).toggle(1==Math.abs(+this.value));$("div[fix]",d).toggle(2==Math.abs(+this.value));$("div[cust]",d).toggle("custom"==this.value)}).trigger("change",a);return a};const u="currentTab prevUsedTab openerTab hoveredTabs eventTabs leftTab rightTab firstTab lastTab".split(" "),C=_Qi(u,"tse").add({other:"Other tab... <edit></edit>"});e.loadUrls=e.openBookmarks=function(a,b){let c=a.params,
d=c.tabPos||"",f=_0p(c.refTab)?"other":c.refTab;a=_Ww(_3r)`\n ${"loadUrls"==a.action?`\n <div> <btnFld popupAround>${_ba("url",c.url,"Enter a URL...","field autoDim")}<b button></b>\n </btnFld> <h h=url></h>\n <par name=usesTabs value="${c.usesTabs||""}" bool></par>\n </div>\n `:_Ww`\n <div>${_xe("bookmarkId",c.bookmarkId||"")}</div>\n `}\n <div>\n <l>Open on:</l> ${_1u({"":["Existing tab","opnTgtTbs"],before:["The left of","../opnOnLft"],after:["The right of","../opnOnRgt"],newWin:"New window"},
"tabPos",d)}\n ${_1u(C,"refTab",f||"currentTab")}\n <newTabs><label>${_Gy("newTabs",c.newTabs)}Create tabs if needed</label> <h h=nwTb></h></newTabs>\n </div>\n <div winType>\n <l>Win type:</l> ${_Mo({normal:"Normal",popup:"Pop-up"},c.winType,"winType")}\n <label>${_Gy("incognito",c.incognito)}Incognito</label> <h h=../loadUrls/icgn></h>\n </div>\n `;_0p(c.refTab)&&$("[name=refTab]",a).prop("value",c.refTab);$("[name=tabPos]",a).on("change",function(g,h=b){g=$(this).attr("value");$("[name=refTab]",
h).css("display",g.in("before","after")?"":"none");$("[winType]",h).css("display","newWin"==g?"":"none");$("newTabs",h).css("display",g?"none":"")}).trigger("change",a);$("btnFld",a).on("input",function(g){$(this).siblings("par").val(_Ba._Nu(g.target.value))});_nu($("btnFld",a),"b)t)r<l<","url domn mdom path dPth qry frag tit sltn ombar clbrd exClb1 clbLns dir env".split(" "));return a};e.bookmarkUrls=e.bookmarkTabs=function(a){var b=a.params;a="bookmarkUrls"==a.action;b=_Ww`\n <div><l>Dest. folder:</l> ${_xe("parentId",
b.parentId||"",!0)} <h h=flr></h></div>\n <div><l>Name:</l> <btnFld popupAround>${_ba("path",b.path,a?"":"Optional name pattern...","field autoDim")}<b button></b></btnFld> <h h=pth></h></div>\n ${a?`\n <div><l>URL:</l> <btnFld popupAround>${_ba("url",b.url,"","field autoDim")}<b button></b></btnFld> <h h=url></h></div>\n <par name=usesTabs value="${b.usesTabs||""}" bool></par>\n `:""}\n <div><l>Insertn order:</l> ${_Mo({date:"Creation date",name:"Name",url:"URL"},b.order,"order")}\n ${_Mo({asc:"Ascending",
desc:"Descending"},b.ordDir,"ordDir")} <h h=ord></h></div>\n <div><l></l> ${_Mo({folder:"Folders first",bkmrk:"Bookmarks first",none:"Intersperse"},b.prior,"prior")} <h h=pri></h></div>\n <div><l>If exists:</l> ${_Mo({keep:"Do nothing",updt:"Update",repl:"Replace"},b.ifExists,"ifExists")} <h h=ifEx></h></div>\n `;const c=$("[name=path]",b);if(a){const d=$("[name=url]",b);$("btnFld",b).on("input",function(){$(this).parent().siblings("par").val(_Ba._Nu(c.val())||_Ba._Nu(d.val()))});_nu(d.parent(),"b)t)r<l<",
"url domn mdom path dPth sltn clbrd exClb1".split(" "))}_nu(c.parent(),"b)t)r<l<","tit domn mdom path dPth sltn clbrd exClb1 date".split(" "));return b};e.moveTabs=function({params:a}){return _Ww($)`\n <div>\n &nbsp; Move to: ${_1u({newWin:"New window",before:["the left of","bef"],after:["the right of","aft"]},"pos",a.pos||"newWin")}\n ${x("refTab",a.refTab||"currentTab",u)}\n ${""}\n </div>\n `.find("[name=pos]").change(function(){$(this).nextAll().css("display","newWin"==_Me(this)?"none":"")}).triggerEvt("change").end()};
e.groupTabs=function({params:a}){return _Ww($)`\n <div>&nbsp; Add to: ${_1u({new:["New group","nw"],no:["No group","no"],before:["The left of","lf"],after:["The right of","rt"]},"target",a.target||"new")} ${x("refTab",a.refTab||"currentTab",u)} <h h=rfTb></h></div>\n <div><label>${_Gy("noNewGrp",a.noNewGrp)}Only if reference tab is grouped</label> <h h=nNg></h></div>\n `.find("[name=target]").change(function(){$(this).nextAll().add($(this).closest("div").next()).css("display",_Me(this).in("new","no")?
"none":"")}).triggerEvt("change").end()};e.undoClose=function({params:a}){let b=a.urlTest||{};return $(`\n <div>\n &nbsp;Reopen type: ${_Mo({"":"Any",tab:"Tabs",win:"Windows"},a.objType,"objType")} <h h=typ></h> &nbsp; &nbsp; &nbsp; &nbsp;\n Amount: <input type=number name=maxObjs value=${a.maxObjs||1} min=1 max=99> <h h=amn></h>\n </div>\n <div ${"win"==a.objType?"greyedout":""}>\n <label>${_Gy("currWinTabs",a.currWinTabs)}Tabs in current window only</label>  <h h=curW></h>\n </div>\n <div name=urlTest value={}>&nbsp;Domain:\n ${_Mo({0:"does",
1:"doesn't"},b.negate,"negate","bool")}\n ${_Mo({equals:"match exactly",contains:"contain",starts:"start with",ends:"end with"},b.type,"type")}\n ${_ba("value",b.value,"Enter text","size=15")} <h h=flt></h>\n </div>\n `).find("[name=objType]").change(function(){$(this).closest("div").parent().find("[name=currWinTabs]").closest("div").attr("greyedout","win"==this.value?"":null)}).end()};e.favoriteTabs=function({params:a}){return`\n <div><l>Favorite list:</l> ${_Mo(_wh,a.listId,"listId")}  <h h=lst></h></div>\n <div><l>Operation:</l> ${_Mo({add:"Add",
set:"Set",del:"Remove"},a.oper,"oper")} <h h=opr></h></div>\n `};const v={gridLayout:"grid2x2",animDuration:.3};e.moveResizeWins=function(a,b){let c=v.sc().add(a.params);a=d=>{let f=!c[d]||+_kd(c,d,"abs"),g=_kd(c,d,"val");return`<input type=number name="${d}.val" value="${null!=g?g:""}" step=${({px:10,tile:1,"%":5})[c.unit]} min="${f&&d.in("w","h")?1:""}"> `+_Mo([[1,"absolute"],[0,"relative"]],f,d+".abs","number")};t(b);$(b).on("focus change","[name=unit]",function(){this.prevValue=this.value}).on("input",
"[name=unit]",function(){let d=_vg(b,!0);$("[name=gridLayout]",b).closest("div").attr("greyedout","tile"!=d.unit?"":null);let f=b.previewPane?$("select",b.previewPane).val():_Ba._Ui;$("[name$=val]",b).each((g,h)=>{h.value&&(h.value=_9g(h.value,h.name[0],this.prevValue,d.unit,d,f),h.min&&(h.value=Math.max(h.value,h.min)));h.step={px:10,tile:1,"%":5}[d.unit]})}).on("change","[name='w.abs'], [name='h.abs']",function(){$(this).prevAll("[type=number]")[0].min=+this.value?1:""});return _Ww`\n ${_aj()}\n <div><l>Unit:</l> ${_Mo({px:"Pixels",
tile:"Tiles","%":"%"},c.unit,"unit")} <h h=uni></h></div>\n <div ${"tile"!=c.unit?"greyedout":""}><l>Layout:</l> ${_w("gridLayout","gridLayout",c.gridLayout)}</div>\n <div><l>X:</l> ${a("x")} <h h=x></h></div>\n <div><l>Y:</l> ${a("y")} <h h=y></h></div>\n <div><l>Width:</l> ${a("w")} <h h=w></h></div>\n <div><l>Height:</l> ${a("h")} <h h=h></h></div>\n ${1<Object.keys(_Ba._Vw).length?`\n <div><l>w.r.t.:</l> ${_Mo([["","Containing monitor"]].concat(_Qy()),c.baseMonitor,"baseMonitor",`value="${c.baseMonitor||
""}"`)} <h h=mon></h></div>\n `:""}\n <div><l>Animate:</l> <input type=number name=animDuration value="${c.animDuration}" min=0 max=10 step=0.1> secs <h h=../tileWins/ani></h></div>\n `};e.fitWinsToGrid=function(a,b){a=v.sc().add(a.params);t(b);return _Ww`\n ${_aj()}\n <div><l>Layout:</l> ${_w("gridLayout","gridLayout",a.gridLayout)}</div>\n <div><l>Animate:</l> <input type=number name=animDuration value="${a.animDuration}" min=0 max=10 step=0.1> secs <h h=../tileWins/ani></h></div>\n <par name=unit value=tile></par>\n `};
e.tileWins=function(a,b){a=v.sc().add(a.params);t(b);return _Ww`\n ${_aj()}\n <div><l>Layout:</l> ${_w("gridLayout","gridLayout",a.gridLayout)}</div>\n <div><l>X:</l> <input type=number name=x value="${a.x||""}"> <h h=x></h></div>\n <div><l>Y:</l> <input type=number name=y value="${a.y||""}"> <h h=y></h></div>\n <div><l>Cols:</l> <input type=number name=cols value="${a.cols||""}" min=1 max=20> <h h=c></h></div>\n <div><l>Rows:</l> <input type=number name=rows value="${a.rows||""}" min=1 max=20> <h h=r></h></div>\n ${1<
Object.keys(_Ba._Vw).length?`\n <div><l>w.r.t.:</l> ${_Mo([["","Containing monitor"]].concat(_Qy()),a.baseMonitor,"baseMonitor",`value="${a.baseMonitor||""}"`)} <h h=mon></h></div>\n `:""}\n <div><l>Animate:</l> <input type=number name=animDuration value="${a.animDuration}" min=0 max=10 step=0.1> secs <h h=ani></h></div>\n `};e.minimizeWins=function({params:a}){return $(`\n <div>\n ${_Mo([[_Ns,"Minimize"],[_Hj,"Unminimize"],[_Fa,"Toggle"]],a.mode,"mode","number")}\n <h h=mod></h>\n </div>\n <div><label>${_Gy("noAnim",
a.noAnim)}No animation</label> <h h=../noAnim></h></div>\n `)};e.maximizeWins=function({params:a}){return $(`\n <div>\n ${_Mo([[_Ns,"Maximize"],[_Hj,"Unmaximize"],[_Fa,"Toggle"]],a.mode,"mode","number")}\n <h h=mod></h>\n </div>\n <div><label>${_Gy("noAnim",a.noAnim)}No animation</label> <h h=../noAnim></h></div>\n `)};e.restoreWins=function({params:a}){return $(`<div><label>${_Gy("noAnim",a.noAnim)}No animation</label> <h h=../noAnim></h></div>`)};e.focusWin=function({params:a},b){a=$(_3r(`\n <div>&nbsp; Mode: ${_Mo([[_Ns,
"Focus"],[_Hj,"Unfocus"],[_Fa,"Toggle"]],a.mode,"mode","number")} <h h=mode></h></div>\n <div><label>${_Gy("peek",a.peek)}Keep MRU order</label> <h h=pk></h></div>\n `));$("[name=mode]",a).change(function(c,d=b){$("[name=peek]",d).closest("div").attr("greyedout",this.value==_Hj?"":null)}).trigger("change",a);return a};e.fullscreenWins=p("mode",[[_Ns,"Fullscreen"],[_Hj,"Normal"],[_Fa,"Toggle"]]);e.hideWins=p("mode",[[_Ns,"Hide"],[_Hj,"Unhide"],[_Fa,"Toggle"]]);e.topmostWins=p("mode",[[_Ns,"Topmost"],
[_Hj,"Not topmost"],[_Fa,"Toggle"]]);e.scrollWins=function({params:a},b){a.oldMethod&&(a.method="old");return $(_3r(`\n <div><l>Direction:</l> ${_Mo({up:"Up",down:"Down",left:"Left",right:"Right"},a.dir,"dir")}</div>\n <div><l>Amount:</l> <input type=number name=amount value="${a.amount||1}" min=1 max=250> <h h=amn></h></div>\n <div><l>Method:</l> ${_Mo({"":"Standard scroll",wheel:"Wheel turn",old:"Legacy scroll"},a.method,"method")} <h h=mtd></h></div>\n <div><label>${_Gy("keepModKeys",a.keepModKeys)}Keep modifier keys state</label> <h h=kms></h></div>\n <div><label>${_Gy("pointedElem",
a.pointedElem)}Apply to hovered element</label> <h h=pnt></h></div>\n `))};e.openMenu=function({params:a}){return _Ww`\n <div><l>Menu to open:</l> ${_w("menuSpec","menuId",a.menuId)} <h h=mnu></h></div>\n <div><l>Position:</l> ${_Xt(a,!0)} <h h=pos></h></div>\n <div><l>Alignment:</l> ${_st(a,!0)} <h h=alg></h></div>\n <div><l>Style:</l> ${_cp(a)} <h h=sty></h></div>\n `};e.closeMenu=function({params:a}){return _Ww`<div>Menu to close: ${_w("menuSpec","menuId",a.menuId,"&nbsp;",!0,!1)} <h h=mnu></h></div>`};
e.moveSelectMark=function({params:a},b){$(b).on("input","[name=dir]",function(){+this.value||(this.value=0<this.defaultValue?-1:1);this.defaultValue=this.value});return _Ww`\n <div><l>Menu:</l> ${_w("menuSpec","menuId",a.menuId,"&nbsp;",!0,!1)} <h h=mnu></h></div>\n <div><l>Step:</l> <input type=number name=dir value="${a.dir||1}"> <h h=dir></h></div>\n `};e.selectMarkedItem=function({params:a}){return _Ww`\n <div><l>Menu:</l> ${_w("menuSpec","menuId",a.menuId,"&nbsp;",!0,!1)} <h h=mnu></h></div>\n <div><l>Which item:</l> ${_Mo({marked:"Marked",
hilited:"Highlighted",hovered:"Hovered"},a.markType,"markType")} <h h=mkT></h></div>\n <div><l>Method:</l> ${_Mo({0:"Normal",1:"Secondary 1",2:"Secondary 2"},a.selMode,"selMode","number")} <h h=mde></h></div>\n `};e.runCommand=function({params:a}){a=_Ww`\n <div>\n File: <btnFld popupAround>${_jp("cmd",a.cmd,"Enter a file or command...","","","autoDim")}<b button></b></btnFld> <h h=cmd></h>\n <par name=usesTabs value="${a.usesTabs||""}" bool></par>\n </div>\n `;$("btnFld",a).on("input",function(b){$(this).siblings("par").val(_Ba._Nu(b.target.value))});
_nu($("btnFld",a),"b)t)r<l<","tit url domn mdom path dPth qry frag sltn ombar clbrd exClb1 clbLns clbWrd date dir env".split(" "));return a};let m=()=>[["","System clipboard"]].concat([1,2,3,4,5].map(a=>[a,"Extra clipboard "+a]));e.insertText=e.clpbrdPut=function({params:a,action:b}){b="clpbrdPut"==b;a=$(_3r(`\n <div txtTmplExpr>\n <textarea field name=text placeholder="Enter text..." spellcheck=false>${_tw(a.text||"")}</textarea>\n <side><b button>&#x25BE;</b> <h h=txt></h></side>\n <par name=usesTabs value="${a.usesTabs||
""}" bool></par>\n </div>\n ${b?`\n <div style="margin: 4px 0">&nbsp; Put text in: ${_Mo(m(),a.target,"target")} <h h=tgt></h></div>\n `:""}\n <div>\n <label>${_Gy("verbatim",a.verbatim)}Verbatim text</label> <h h=vbm></h>\n ${b?`\n &nbsp; &nbsp; &nbsp; <label>${_Gy("append",a.append)}Append</label> <h h=apn></h>\n `:`\n <!--div><label>${_Gy("paste",a.paste)}Insert by pasting</label> <h></h></div-->\n `}\n </div>\n `));_nu($("[txtTmplExpr]",a),"brtl","tit url domn mdom path dPth sltn ombar obWrd clbrd exClb1 clbLns clbWrd date dir env".split(" "));
let c=()=>_Ph(d,!0),d=$("[name=text]",a).on("input",function(){$(this).siblings("par").val(_Ba._Nu(this.value));_Ph(d,!0)})[0];return a.prop("onInsert",()=>c)};e.txtToUrl=function({params:a}){_7p(a)&&(a={urlTmpl:"google.com/search?q=<text>",prtcol:"http"});a=$(_3r(`\n <div><l>Text:</l> <btnFld multi><textarea field name=text spellcheck=false>${_tw(a.text||"")}</textarea><b button></b></btnFld> <h h=txt></h></div>\n <div><l>Protocol:</l> ${_ba("prtcol",a.prtcol)} <h h=prot></h> &nbsp; &nbsp; &nbsp;<label>${_Gy("www",
a.www)}Add "www"</label> <h h=w3></h></div>\n <div><l>Template:</l> <btnFld popupAround>${_ba("urlTmpl",a.urlTmpl,"","field autoDim")}<b button></b></btnFld> <h h=tmpl></h>\n <par name=usesTabs value="${a.usesTabs||""}" bool></par></div>\n <div><l>Save to:</l> ${_Mo(m(),a.tgtCbrd,"tgtCbrd")} <h h=tgt></h></div>\n `));$("[name=urlTmpl]",a).on("input",function(d){$(this).parent().siblings("par").val(_Ba._Nu(d.target.value))});_nu($("[name=text]",a).parent(),"brtl","sltn ombar obWrd clbrd exClb1 clbLns clbWrd dir env".split(" "));
_nu($("[name=urlTmpl]",a).parent(),"b)t)r<l<","txt sltn ombar clbrd clbWrd url domn mdom path dPth qry frag date dir env".split(" "));let b=()=>_Ph(c,!0),c=$("[name=text]",a).on("input",b)[0];return a.prop("onInsert",()=>b)};e.extractURLs=function({params:a}){let b=_7p(a)?"":"text"in a?a.text:`<clipboard${a.target|0?`(${a.target|0})`:""}>`;a=$(_3r(`\n <div><l>Source text:</l> <btnFld multi><textarea field name=text spellcheck=false>${_tw(b)}</textarea><b button></b></btnFld> <h h=txt></h></div>\n <div><l>Save to:</l> ${_Mo(m(),
a.target,"target")} <h h=tgt></h></div>\n `));_nu($("btnFld",a),"brtl","sltn ombar obWrd clbrd exClb1 clbLns clbWrd".split(" "));let c=()=>_Ph(d,!0),d=$("[name=text]",a).on("input",c)[0];return a.prop("onInsert",()=>c)};e.delDupLines=function({params:a}){return`<div> &nbsp; ${_Mo(m(),a.target,"target")} <h h=tgt></h></div>`};e.copyLinks=function({params:a}){return`\n <div> <iblock><label>${_Gy("lnk",a.lnk||_7p(a))}Links</label> <br>\n <label>${_Gy("img",a.img)}Images</label> &nbsp; </iblock>\n <iblock><label>${_Gy("vid",
a.vid)}Videos</label> &nbsp; &nbsp;\n <label>${_Gy("aud",a.aud)}Audio</label> <br>\n <label>${_Gy("imgRes",a.imgRes)}Graphic resources</label> </iblock>\n &nbsp; <h h=tpe></h></div>\n <hr>\n <div><l>Copy to:</l> ${_Mo(m(),a.clpbrd,"clpbrd")} &nbsp; <h h=tgt></h></div>\n `};e.copyElemUrl=function({params:a}){return $(`\n <div type><l>Element type:</l> <label>${_Gy("lnk",a.lnk)}Link</label> &nbsp;\n <label>${_Gy("mda",a.mda)}Media</label> &nbsp;\n <label>${_Gy("frm",a.frm)}Frame</label> &nbsp; <h h=tpe></h></div>\n <div><label>${_Gy("smart",
a.smart)}Use smart detection</label> <h h=smt></h></div>\n <div><l>Copy to:</l> ${_Mo(m(),a.target,"target")} <h h=tgt></h></div>\n `).filter("div[type]").on("click","[type=checkbox]",function(b){$(this).closest("div").find(":checked").length||b.preventDefault()}).end()};e.openElemUrl=function({params:a}){return`<div>Element type: ${_Mo({lnk:"Link",mda:"Media"},a.type,"type")} <h h=tpe></h></div>`};const y={silent:["Silent","sil"],audio:["Audible","aud"],notif:["Floating display","ntf","","perms=notf"],
dwnlApi:["Dwnld manager","mgr","","perms=dwld"]};e.saveUrl=function({params:a},b){var c={rename:"Rename",overwrite:"Overwrite",ask:"Ask",cancel:"Cancel"};a=_Ww($)`\n <div><l>URL:</l> <btnFld popupAround>${_ba("url",a.url,"URL to save...","field autoDim")}<b button></b></btnFld> <h h=url></h></div>\n <div><l>Folder:</l> <btnFld popupAround>${_jp("folder",a.folder,"Destination... (optional)","DIR","","autoDim")}<b button></b></btnFld> <h h=dir></h></div>\n <div><l>Filename:</l> <btnFld popupAround>${_ba("file",
a.file,"(optional)","field autoDim")}<b button></b></btnFld> <h h=fnm></h></div>\n <par name=usesTabs value="${a.usesTabs||""}" bool></par>\n <div><l>Method:</l> ${_1u(y,"method",a.method||"silent")} &nbsp; &nbsp; &nbsp; &nbsp;\n <label>${_Gy("showSaveAs",a.showSaveAs)}Show "Save as..."</label> <h h=svas></h>\n </div>\n <!--dWrap-->\n <div inln><l>If file exists:</l> ${_Mo(c,a.ifFileExist,"ifFileExist")}</wrap> <h h=flEx></h></div> &nbsp;\n <div inln>If name exists:   ${_Mo(c,a.ifNameExist,"ifNameExist")} <h h=nmEx></h></div>\n <!--/dWrap-->\n <div><l>When done:</l> ${_Mo({"":"Do nothing",
open:"Open file",openDir:"Show in folder",copy:"Copy file path"},a.doAtEnd,"doAtEnd")}\n <tgtClpbrd>&nbsp; to: ${_Mo(m(),a.tgtClpbrd,"tgtClpbrd")}</tgtClpbrd> <h h=end></h>\n </div>\n `;const d=$("[name=url]",a)[0],f=$("[name=folder]",a)[0],g=$("[name=file]",a)[0],h=$("[name=usesTabs]",a);$("btnFld",a).on("input",function(){h.val(_Ba._Nu(d.value)||_Ba._Nu(f.value,!0)||_Ba._Nu(g.value,!0))});$("[name=doAtEnd]",a).on("change",function(){$(this).nextAll("tgtClpbrd").toggleClass("noDisplay","copy"!=this.value)}).trigger("change");
$("[name=method]",a).on("change",function(q,r=b){$("[name=ifFileExist]",r).closest("div").attr("greyedout","dwnlApi"==_Me(this)?"":null)}).trigger("change",a);c="domn mdom path dPth prot qry frag sltn ombar clbrd exClb1".split(" ");_nu(d.closest("btnFld"),"b)t)r<l<",["url",...c,"clbLns"]);_nu(f.closest("btnFld"),"b)t)r<l<",["tit",...c,"date","dir","env"]);_nu(g.closest("btnFld"),"b)t)r<l<",["fname","fext","tit",...c,"date"]);return a};e.saveElemUrl=function({params:a}){return _Ww`\n <div><l>Folder:</l> ${_jp("folder",
a.folder,"(optional)","DIR","","autoDim")} <h h=dir></h></div>\n <div><l>Method:</l> ${_1u(y.sc().del("silent"),"method",a.method||"audio")}</div>\n `};e.setVolume=function({params:a},b){a=$(_3r(`\n <div><l>Scope:</l> ${_Mo({":sys":"Global volume",":brwr":"Browser volume"},a.target,"target")} <h h=scp></h></div>\n <div><l>Mode:</l> ${_Mo({set:"Set to",up:"Increase by",down:"Decrease by",mute:"Mute",unmute:"Unmute",toggle:"Toggle mute"},a.mode,"mode")}</div>\n <div><l>Amount:</l> <input type=number name=value value=${null!=
a.value?a.value:100} min=0 max=100 step=5></div>\n `));$("[name=mode]",a).change(function(c,d=b){$("[name=value]",d).closest("div").attr("greyedout",this.value.in("set","up","down")?null:"")}).trigger("change",a);return a};e.sendInput=_Kf;e.stopSendInput=_nr;e.runScript=_qf(function*(a,b){a=yield _0g(a.params);a.onInsert=()=>_Ph($("textarea",b)[0],!1,[700,-30],[400,-170]);$(b).on("input","textarea",a.onInsert);return a});e.brkActSeq=function({params:a}){let b=a.oper?[{type:"tgtTabs",comp:"ne"==a.oper?
"eq":a.oper,not:"ne"==a.oper,value:a.value}]:a.conds||[];const c={tgtTabs:f=>`\n ${_Mo({0:"",1:"not"},f.not,"not","bool")}\n ${_Mo({eq:"equal",lt:"less than",gt:"greater than"},f.comp,"comp")}\n <input type=number min=0 name=value value="${f.value|0}">\n `,swtchSt:f=>`\n ${_5f("swtchId",f.swtchId)}\n ${_Mo([[1,"is ON"],[0,"is OFF"]],f.state,"state","bool hard")}\n `,txtMtch:f=>`\n <btnFld popupAround>${_ba("txt1",f.txt1,"Enter text...","field autoDim")}<b button></b></btnFld>\n ${_Mo({0:"",1:"not"},
f.not,"not","bool")}\n ${_Mo({equals:"equals",contains:"contains",starts:"starts with",ends:"ends with"},f.comp,"comp")}\n <par name=usesTabs value="${f.usesTabs||""}" bool></par>\n <btnFld popupAround>${_ba("txt2",f.txt2,"Enter text...","field autoDim")}<b button></b></btnFld>\n `};let d=f=>`\n <div value={}>\n <del button title="Delete condition">&#xD7;</del>${_Mo({tgtTabs:"If target tabs",swtchSt:"If switch",txtMtch:"If text"},f.type,"type")}: <wrap>${c[f.type](f)}</wrap> <h h=${f.type}></h> ${_Mo({A:"AND",
O:"OR",E:"EQUAL"},f.oper,"oper")} <h h=oper></h>\n </div>\n `;a=_3r(`\n <div><l>Action:</l> ${_Mo({contChn:"Continue chain",stopChn:"Stop chain",stopSeq:"Stop entire sequence"},a.action,"action")} <h h=act></h></div>\n <conds name=conds value=[]>${b.map(d).join("")}</conds>\n <div><add>Add condition</add> <h h=adCnd></h></div>\n `);$("add",a).on("click",function(){let f=$(this).closest("div").siblings("conds"),g=f.find("> :last-child [name=type]").prop("value")||"tgtTabs";f[0].insertAdjacentHTML("beforeend",
d({type:g}));$(this).triggerEvt("change",!0)});$("> conds",a).on("change","[name=type]",function(){_sy($(this).closest("div"))&&_Pj(700);$(this).closest("div").replaceWith(d({type:this.value}))}).on("dblclick","del",function(){_sy($(this).closest("div"))&&_Pj(500);$(this).closest("conds").triggerEvt("change",!0,!0);$(this).closest("div").remove()}).on("input","[type=text]",function(f){f=$(this).closest("wrap");let g=f.find("[type=text]");f.find("[name=usesTabs]").val(_Ba._Nu(g[0].value)||_Ba._Nu(g[1].value))});
_nu([$("> conds",a),"btnFld"],"b)t)r<l<","tit url domn mdom path dPth prot qry frag sltn ombar clbrd exClb1 dir env".split(" "));return a};e.setSwtchSt=function({params:a}){return`\n <div><l>Switch:</l> ${_5f("swtchId",a.swtchId)} <h h=swt></h></div>\n <div><l>Action:</l> ${_Mo([[1,"Turn ON"],[0,"Turn OFF"],[-1,"Toggle"]],a.state,"state","number")} <h h=act></h></div>\n `};e.wait=function({params:a},b){let c=[["time",["Fixed time lapse"]]];var d=[_Ta,_iw,_Pk,_5w,_oe,_Ly,_My,_ho,_7a,_oo,_Ht,_jr,_lh,
_vk,_yf,_te,_ed,_ms,_nw];for(let f of d)d=_Bk[f],c.push([f,[d.name,"/envEvts/"+d.help,f.in(_iw,_vk)]]);a=_3r(`\n <div><l>Wait for:</l> ${_1u(c,"event",a.event||"time")} <h h=wfr></h></div>\n <div t=time><l>Time lapse:</l> <input type=number name=time value=${a.time||.5} min=0 step=0.1> secs <h h=tim></h></div>\n <div t=evt><l>Timeout:</l> <input type=number name=timeout value=${a.timeout||10} min=0> secs <h h=tmo></h></div>\n <div t=evt><l>If timeout:</l> ${_Mo({contChn:"Continue chain",stopChn:"Stop chain",
stopSeq:"Stop entire sequence"},a.ifTmOut,"ifTmOut")} <h h=ifto></h></div>\n <div><label>${_Gy("sync",a.sync)}Postpone other actions</label> <h h=sync></h></div>\n `);$("[name=event]",a).change(function(f,g=b){$("div[t]",g).addClass("noDisplay").filter(`[t=${"time"==_Me(this)?"time":"evt"}]`).removeClass("noDisplay")}).trigger("change",a);return a};e.playAudio=_qf(function*({params:a,action:b},c){var d=(yield _Ba._ky(_Ir))||{};const f=k=>_Ba._dk([{sequence:[{action:b,params:k}]}]);yield f({});const g=
{};for(let [k,l]of _Ba._4f)g[k]=l.name;let h={};for(var q of yield _if())_ng(h,(q.lang||navigator.language).match(/^[^\-]*/)[0],[]).push(q);q={};for(let k of Object.keys(h))q[k]=Intl.DisplayNames?(new Intl.DisplayNames("en",{type:"language"})).of(k):k.caplze();d=_Ww`\n <div><l>Type:</l> ${_Mo({preset:"Preset sound",system:"System sound",file:"Sound file",voice:"Speech"},a.type,"type")} <h h=typ></h></div>\n \n <div t=s><l>Sound:</l> ${_Mo(d,a.evtAlias,"evtAlias")} <h h=evt></h></div>\n <div t=pq><l>Sound:</l> ${_Mo(g,
a.sndId,"sndId")} </div>\n <div t=f><l>File:</l> ${_jp("file",a.file,"","Audio files: *.aac;*.aif;*.flac;*.m4a;*.mp2;*.mp3;*.ogg;*.oga;*.wav;*.wma;*.webm, All Files: *.*","","autoDim")} <h h=fle></h></div>\n \n <div t=p inln><l>Duration:</l> <input type=number name=len value="${a.len}" min=0 max=10 step=0.1> secs <h h=len></h></div>\n <div t=p inln>&nbsp; Pitch: <input type=number name=freq value="${a.freq}" min=10 max=15000 step=10> Hz <h h=frq></h></div>\n <div t=p></div>\n <div t=fqs><l>Duration:</l> <input type=number name=lenP value=${a.lenP||
100} min=10 max=1000 step=10> % <h h=lnp></h></div>\n <div t=fqsp inln><l>Times:</l> <input type=number name=times value=${a.times||1} min=1 max=50> <h h=tms></h> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </div>\n <div t=fqsp inln>&nbsp;Gap: <input type=number name=gap value=${a.gap||0} min=-100 max=500 step=5> % <h h=gap></h></div>\n <div t=fqsp></div>\n <div t=fqsp inln><l>Volume:</l> <input type=number name=vol value=${a.vol||100} min=0 max=500 step=10> % <h h=vol></h></div>\n <div t=fqsp inln>&nbsp;Balance: ${_Mo({C:"Center",
L:"Left",R:"Right",LR:"Left to right",RL:"Right to left"},a.bal,"bal")} <h h=bal></h></div>\n \n <div t=v><l>Text:</l> <btnFld multi><textarea field name=text spellcheck=false>${_tw(a.text||"")}</textarea><b button></b></btnFld> <h h=txt></h>\n <par name=usesTabs value="${a.usesTabs||""}" bool></par></div>\n <div t=v><l>Language:</l> ${_Mo(q,a.lang,"lang")} <h h=lng></h></div>\n <div t=v><l>Voice:</l> ${_Mo([],"","voice","number")} </div>\n <div t=v inln><l>Pitch:</l> <input type=number name=pitch value=${a.pitch||
5} min=1 max=10> &nbsp; &nbsp; &nbsp; &nbsp; </div> \n <div t=v inln>Speed: <input type=number name=rate value=${a.rate||100} min=10 max=200 step=10> % </div>\n <div t=v><l>Volume:</l> <input type=number name=vol value=${a.vol||100} min=0 max=100 step=10> % </div>\n <div></div>\n <div inln><l>Play mode:</l> ${_Mo({ovrlp:"Overlap",enque:"Enqueue",intrrp:"Interrupt"},a.mode,"mode")} <h h=mde></h></div>\n &nbsp; &nbsp; <btn test=play title="Test audio">&#9656;</btn><btn test=stop title="Stop test">&#9632;</btn>\n `;
let r=$("[name=type]",d)[0],z=$("[name=sndId]",d)[0],A=$("[name=text]",d)[0];$([r,z]).change(function(k,l=c,w=!0){k=r.value[0];let n=_Ba._4f[z.value];"p"==k&&n.file&&(k="q");$("div[t]",l).addClass("noDisplay").filter(`[t*=${k}]`).removeClass("noDisplay");"preset"==r.value&&!n.file&&w&&($("[name=freq]",l).val(n.dfltFreq),$("[name=len]",l).val(n.dfltLen))}).trigger("change",[d,!a.freq]);$("[name=lang]",d).change(function(k,l=c,w=0){let n=$("[name=voice]",l)[0];n.options.length=0;(h[this.value]||[]).forEach((D,
B)=>n.options.add(new Option(D.name,B,!1,B==w)))}).trigger("change",[d,a.voice|0]);$("[name=times]",d).change(function(k,l=c){$("[name=gap]",l).closest("div").attr("greyedout",1==this.value?"":null)}).trigger("change",d);$(A).on("input",function(){_Ph(this,!0);$("[name=usesTabs]",this.closest("div")).val(_Ba._Nu(this.value))});$("[test=play]",d).mousedown(()=>f(_tr(c))());$("[test=stop]",d).mousedown(()=>f({mode:"intrrp"})());_nu($("[name=text]",d).parent(),"brtl","tit domn mdom sltn ombar clbrd exClb1".split(" "));
return $(d).prop("onInsert",()=>()=>$(A).triggerEvt("input"))});e.setMonBright=function({params:a}){let b=[["all","All monitors"],["focus","Focused monitor"],["mouse","Hovered monitor"]].concat([..._Ba._Vw].map(([c,{name:d}])=>[c,d]));return`\n <div><l>Monitor:</l> ${_Mo(b,a.monId,"monId")} <h h=mon></h></div>\n <div><l>Mode:</l> ${_Mo({set:"Set to",up:"Increase by",down:"Decrease by"},a.mode,"mode")}</div>\n <div><l>Amount:</l> <input type=number name=level value=${null!=a.level?a.level:50} min=0 max=100 step=5> <h h=amn></h></div>\n `}})();
