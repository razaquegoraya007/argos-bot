'use strict';function _Us(d){function b(c,f){if(c){var e=c.commonOptions||{};e=null!=e.withPreviews?e.withPreviews&&_Ha:e.thumbSize;e=(null==e?f:e)|0;if(c.type.in("TSE","closedTabs"))a.tabIcons=!0,e&&(a.tabThumbs=Math.max(a.tabThumbs|0,e),"closedTabs"==c.type&&(a.closedTabThumbs=!0));else if(_0p(c.content))for(let g of c.content)if(b(g,e),a.closedTabThumbs)break}}let a={};for(let [,c]of d){if(!c){15>d.length&&_Pf("undefTrigActData",{trigActList:d});break}if(!c.disabled)for(let [f,e,g]of _2t(c.actions))if("params"==
f&&"openMenu"==g.action&&e.menuId&&(b(_Np(e.menuId,"menuSpec").value),a.closedTabThumbs))return a}return a}function _Ss(d,b){_Du({trigActList:null,previewMakerParams:{},customEntities:{}},d,a=>{_Jo=a.customEntities;const c=_Us(a.trigActList);_Ku=c.tabIcons;_Yu=c.closedTabThumbs;let f=(_ai=!!c.tabThumbs)?a.previewMakerParams.sc().add({thumbSize:c.tabThumbs}):{interval:0};_Ya(_4h,f,e=>{e||_Ya(_4h,f,g=>{})});b&&b(a)})}function _rg(d={}){let b={};for(let [a,{value:c}]of d)b[a]=c;_Ya(_za,b)}
function _Oi(d){_sd({mouseGest:{},joysticksOrder:[],advOpts:{}},b=>{_Ya(_Se,b.joysticksOrder);_xh(b.mouseGest.params);_4w(b.mouseGest.display);"function"==typeof _Lr&&_Lr();_Yy(b.advOpts);d&&d(b)})}function _Yy(d){return _Ya(_6j,d)}function _Tj(d={},b){_Du({trigActList:null,customEntities:{}},d,a=>{_Jo.tse=a.customEntities.tse;_3s={};for(let [c,f]of a.trigActList)f.disabled||(_3s[c]=f.actions||[]);_2g(_3s);b&&b(a)})}
function _Od(d={},b){_Du({trigActList:null,mouseGest:{},advOpts:{}},d,a=>{let c=_4t(a.trigActList,_ua(a.mouseGest),a.advOpts);_Ya(_Qo,c);let f=_8u;_8u=!_7p(c.urlTests);f||_6y(_uu(_ts[_7h]));b&&b(a)})}function _Ri(d={},b){_Ss(d,a=>_Tj(a,c=>_Od(c,b)))}function _Ft(){_Mt("toolbarBtns")(d=>{for(let [b,a]of d||[]){if(!Number.isInteger(+b)){_Pf("invalidTBBtnIndex",{btnIdx:String(b),tbBtnCount:d.length});break}_hw(b,a)}})}function _xi(d){_Oi(b=>_Ri(b,a=>{_Ft();_8i();d&&d()}))}
{let d=0;const b=_ug(function*(a){if(!(3E3>Date.now()-d)){var c=yield e=>_Sf.storage.managed.get(null,e),f=(c.when_to_load||"").trim().split(/\s+/);if(a.in(f)){d=Date.now();a=c.administrator_settings;if(_Hy(a)||_Hy("file:///"+a))c=yield _tj(a),c.error||(a=c.content);try{a=JSON.parse(a),a.constructor==Object&&(yield _Ty(a))}catch(e){}}}});_Sf.runtime.onInstalled.addListener(a=>{"install"==a.reason&&_yw.wait()(()=>b("install"))});_Sf.runtime.onStartup.addListener(()=>{_yw.wait()(()=>b("startup"))});
_Sf.storage.onChanged.addListener((a,c)=>{"managed"==c&&_kd(a,"administrator_settings","newValue")&&_yw.wait()(()=>b("policyChange"))})}
function _8i(){_Sf.contextMenus.removeAll();let d=[..._ea("binSwtch",!0)],b=["browser_action"];if(d.length){_Sf.contextMenus.create({id:"swtchList",title:"SWITCHES",contexts:b});_Sf.contextMenus.create({id:"sep1",type:"separator",contexts:b});for(let a of d)_Sf.contextMenus.create({id:a,title:_Np(a).name,type:"checkbox",checked:_il[_Yf(a)[1]],parentId:"swtchList",contexts:b})}_Sf.contextMenus.create({id:"reloadExtn",title:"Emergency repair",contexts:b})};
